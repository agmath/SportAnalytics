<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Adam Gilbert">
<meta name="dcterms.date" content="2024-02-11">

<title>Football Analytics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="FootballAnalytics_files/libs/clipboard/clipboard.min.js"></script>
<script src="FootballAnalytics_files/libs/quarto-html/quarto.js"></script>
<script src="FootballAnalytics_files/libs/quarto-html/popper.min.js"></script>
<script src="FootballAnalytics_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="FootballAnalytics_files/libs/quarto-html/anchor.min.js"></script>
<link href="FootballAnalytics_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="FootballAnalytics_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="FootballAnalytics_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="FootballAnalytics_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="FootballAnalytics_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="FootballAnalytics_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="FootballAnalytics_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#chapter-1-football-analytics" id="toc-chapter-1-football-analytics" class="nav-link" data-scroll-target="#chapter-1-football-analytics">Chapter 1: Football Analytics</a></li>
  <li><a href="#chapter-2-eda-through-stable-versus-unstable-qb-stats" id="toc-chapter-2-eda-through-stable-versus-unstable-qb-stats" class="nav-link" data-scroll-target="#chapter-2-eda-through-stable-versus-unstable-qb-stats">Chapter 2: EDA through Stable Versus Unstable QB Stats</a>
  <ul class="collapse">
  <li><a href="#homework-exercises" id="toc-homework-exercises" class="nav-link" data-scroll-target="#homework-exercises">Homework Exercises</a></li>
  </ul></li>
  <li><a href="#chapter-3-linear-regression-and-rushing-yards-over-expected" id="toc-chapter-3-linear-regression-and-rushing-yards-over-expected" class="nav-link" data-scroll-target="#chapter-3-linear-regression-and-rushing-yards-over-expected">Chapter 3: Linear Regression and Rushing Yards Over Expected</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Football Analytics</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Adam Gilbert </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 11, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This notebook contains sections corresponding to the textbook <em>Football Analytics with Python &amp; R</em>, by Eric A. Eager and Richard A. Erickson. I include a subsection in this notebook for each chapter of the text, and include solutions to exercises as well as some explorations of different questions I thought may be interesting to explore.</p>
</section>
<section id="chapter-1-football-analytics" class="level2">
<h2 class="anchored" data-anchor-id="chapter-1-football-analytics">Chapter 1: Football Analytics</h2>
<p>This introductory chapter provides the reader an introduction to R and Python as well as to the <code>{nflfastR}</code> package in R (and the <code>nfl_data_py</code> Python module). I’ll be working through the textbook in R, since that is my preferred language.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nflfastR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can load <em>play-by-play</em> data using the <code>load_pbp()</code> function from this package. I’ll load the data from the 2021 season, as shown in the textbook.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pbp_21 <span class="ot">&lt;-</span> <span class="fu">load_pbp</span>(<span class="dv">2021</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>pbp_21 <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">play_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">game_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">old_game_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">home_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">away_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">season_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">week</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">posteam</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">posteam_type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">defteam</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">side_of_field</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">yardline_100</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">game_date</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">quarter_seconds_remaining</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">half_seconds_remaining</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">game_seconds_remaining</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">game_half</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">quarter_end</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">qtr</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">down</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">goal_to_go</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">time</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">yrdln</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ydstogo</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ydsnet</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">desc</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">play_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">yards_gained</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">shotgun</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">no_huddle</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">qb_dropback</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">qb_kneel</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">qb_spike</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">qb_scramble</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_length</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_location</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">air_yards</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">yards_after_catch</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">run_location</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">run_gap</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">field_goal_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kick_distance</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">extra_point_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">two_point_conv_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">home_timeouts_remaining</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">away_timeouts_remaining</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">timeout</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">timeout_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">td_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">td_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">td_player_id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">posteam_timeouts_remaining</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">defteam_timeouts_remaining</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_score</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_score</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">posteam_score</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">defteam_score</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">score_differential</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">posteam_score_post</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">defteam_score_post</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">score_differential_post</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">no_score_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">opp_fg_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">opp_safety_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">opp_td_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fg_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">safety_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">td_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">extra_point_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">two_point_conversion_prob</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ep</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_rush_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_rush_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_pass_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_pass_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">air_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">yac_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">comp_air_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">comp_yac_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_comp_air_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_comp_air_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_comp_yac_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_comp_yac_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_raw_air_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_raw_air_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_raw_yac_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_raw_yac_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">wp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">def_wp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">home_wp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">away_wp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vegas_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vegas_home_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">home_wp_post</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">away_wp_post</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vegas_wp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vegas_home_wp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_rush_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_rush_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_pass_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_pass_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">air_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">yac_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">comp_air_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">comp_yac_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_comp_air_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_comp_air_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_comp_yac_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_comp_yac_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_raw_air_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_raw_air_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_home_raw_yac_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_away_raw_yac_wpa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">punt_blocked</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">first_down_rush</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">first_down_pass</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">first_down_penalty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">third_down_converted</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">third_down_failed</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fourth_down_converted</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fourth_down_failed</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">incomplete_pass</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">touchback</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">interception</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">punt_inside_twenty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">punt_in_endzone</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">punt_out_of_bounds</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">punt_downed</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">punt_fair_catch</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kickoff_inside_twenty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kickoff_in_endzone</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kickoff_out_of_bounds</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kickoff_downed</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kickoff_fair_catch</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fumble_forced</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fumble_not_forced</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fumble_out_of_bounds</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">solo_tackle</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">safety</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">penalty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">tackled_for_loss</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fumble_lost</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">own_kickoff_recovery</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">own_kickoff_recovery_td</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">qb_hit</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rush_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pass_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sack</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">touchdown</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pass_touchdown</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rush_touchdown</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">return_touchdown</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">extra_point_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">two_point_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">field_goal_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kickoff_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">punt_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fumble</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">complete_pass</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">assist_tackle</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lateral_reception</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lateral_rush</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lateral_return</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lateral_recovery</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">passer_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">passer_player_name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">passing_yards</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">receiver_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">receiver_player_name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">receiving_yards</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rusher_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rusher_player_name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rushing_yards</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_receiver_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_receiver_player_name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lateral_receiving_yards</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_rusher_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_rusher_player_name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lateral_rushing_yards</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_sack_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_sack_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">interception_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">interception_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_interception_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_interception_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">punt_returner_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">punt_returner_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_punt_returner_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_punt_returner_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">kickoff_returner_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">kickoff_returner_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_kickoff_returner_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">lateral_kickoff_returner_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">punter_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">punter_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">kicker_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">kicker_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">own_kickoff_recovery_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">own_kickoff_recovery_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">blocked_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">blocked_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_for_loss_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_for_loss_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_for_loss_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_for_loss_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">qb_hit_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">qb_hit_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">qb_hit_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">qb_hit_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">forced_fumble_player_1_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">forced_fumble_player_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">forced_fumble_player_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">forced_fumble_player_2_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">forced_fumble_player_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">forced_fumble_player_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">solo_tackle_1_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">solo_tackle_2_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">solo_tackle_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">solo_tackle_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">solo_tackle_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">solo_tackle_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_1_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_2_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_3_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_3_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_3_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_4_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_4_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">assist_tackle_4_team</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">tackle_with_assist</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_with_assist_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_with_assist_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_with_assist_1_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_with_assist_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_with_assist_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tackle_with_assist_2_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_defense_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_defense_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_defense_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_defense_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumbled_1_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumbled_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumbled_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumbled_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumbled_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumbled_2_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumble_recovery_1_team</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fumble_recovery_1_yards</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumble_recovery_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumble_recovery_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumble_recovery_2_team</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fumble_recovery_2_yards</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumble_recovery_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fumble_recovery_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sack_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sack_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">half_sack_1_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">half_sack_1_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">half_sack_2_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">half_sack_2_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">return_team</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">return_yards</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">penalty_team</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">penalty_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">penalty_player_name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">penalty_yards</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">replay_or_challenge</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">replay_or_challenge_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">penalty_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">defensive_two_point_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">defensive_two_point_conv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">defensive_extra_point_attempt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">defensive_extra_point_conv</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">safety_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">safety_player_id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">season</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cpoe</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">series</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">series_success</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">series_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">order_sequence</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">start_time</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">time_of_day</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">stadium</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">weather</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">nfl_api_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">play_clock</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">play_deleted</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">play_type_nfl</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">special_teams_play</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">st_play_type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">end_clock_time</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">end_yard_line</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">fixed_drive</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fixed_drive_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drive_real_start_time</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_play_count</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drive_time_of_possession</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_first_downs</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_inside20</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_ended_with_score</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_quarter_start</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_quarter_end</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_yards_penalized</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drive_start_transition</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drive_end_transition</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drive_game_clock_start</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drive_game_clock_end</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drive_start_yard_line</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drive_end_yard_line</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_play_id_started</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">drive_play_id_ended</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">away_score</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">home_score</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">location</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spread_line</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total_line</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">div_game</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">roof</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">surface</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">temp</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">wind</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">home_coach</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">away_coach</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">stadium_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">game_stadium</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">aborted_play</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">success</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">passer</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">passer_jersey_number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rusher</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rusher_jersey_number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">receiver</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">receiver_jersey_number</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pass</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rush</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">first_down</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">special</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">play</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">passer_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rusher_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">receiver_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">jersey_number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fantasy_player_name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fantasy_player_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fantasy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fantasy_id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">out_of_bounds</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">home_opening_kickoff</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">qb_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">xyac_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">xyac_mean_yardage</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">xyac_median_yardage</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">xyac_success</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">xyac_fd</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">xpass</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pass_oe</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">2021_01_ARI_TEN</td>
<td style="text-align: left;">2021091207</td>
<td style="text-align: left;">TEN</td>
<td style="text-align: left;">ARI</td>
<td style="text-align: left;">REG</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">2021-09-12</td>
<td style="text-align: right;">900</td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;">3600</td>
<td style="text-align: left;">Half1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">15:00</td>
<td style="text-align: left;">ARI 35</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">GAME</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.474098</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.5462618</td>
<td style="text-align: right;">0.4537382</td>
<td style="text-align: right;">0.5462618</td>
<td style="text-align: right;">0.4537382</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.5690569</td>
<td style="text-align: right;">0.5690569</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2021</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Punt</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">13:00:00</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Nissan Stadium</td>
<td style="text-align: left;">Sunny Temp: 78° F, Humidity: 63%, Wind: SSW 6 mph</td>
<td style="text-align: left;">10160000-0585-1194-5bd6-3e939eca6530</td>
<td style="text-align: left;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">GAME_START</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Punt</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">Home</td>
<td style="text-align: right;">-25</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">outdoors</td>
<td style="text-align: left;">grass</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Mike Vrabel</td>
<td style="text-align: left;">Kliff Kingsbury</td>
<td style="text-align: left;">NAS00</td>
<td style="text-align: left;">Nissan Stadium</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">40</td>
<td style="text-align: left;">2021_01_ARI_TEN</td>
<td style="text-align: left;">2021091207</td>
<td style="text-align: left;">TEN</td>
<td style="text-align: left;">ARI</td>
<td style="text-align: left;">REG</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">TEN</td>
<td style="text-align: left;">home</td>
<td style="text-align: left;">ARI</td>
<td style="text-align: left;">ARI</td>
<td style="text-align: right;">35</td>
<td style="text-align: left;">2021-09-12</td>
<td style="text-align: right;">900</td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;">3600</td>
<td style="text-align: left;">Half1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">15:00</td>
<td style="text-align: left;">ARI 35</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">5-M.Prater kicks 65 yards from ARI 35 to end zone, Touchback.</td>
<td style="text-align: left;">kickoff</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0046605</td>
<td style="text-align: right;">0.144037</td>
<td style="text-align: right;">0.0020718</td>
<td style="text-align: right;">0.2260513</td>
<td style="text-align: right;">0.2126011</td>
<td style="text-align: right;">0.0038279</td>
<td style="text-align: right;">0.4067504</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.474098</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.5462618</td>
<td style="text-align: right;">0.4537382</td>
<td style="text-align: right;">0.5462618</td>
<td style="text-align: right;">0.4537382</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.5462618</td>
<td style="text-align: right;">0.4537382</td>
<td style="text-align: right;">0.5690569</td>
<td style="text-align: right;">0.5690569</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">M.Prater</td>
<td style="text-align: left;">00-0023853</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">TEN</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2021</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Punt</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">13:00:00</td>
<td style="text-align: left;">17:05:55</td>
<td style="text-align: left;">Nissan Stadium</td>
<td style="text-align: left;">Sunny Temp: 78° F, Humidity: 63%, Wind: SSW 6 mph</td>
<td style="text-align: left;">10160000-0585-1194-5bd6-3e939eca6530</td>
<td style="text-align: left;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">KICK_OFF</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">TEN 25</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Punt</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">1:33</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">KICKOFF</td>
<td style="text-align: left;">PUNT</td>
<td style="text-align: left;">15:00</td>
<td style="text-align: left;">13:27</td>
<td style="text-align: left;">TEN 25</td>
<td style="text-align: left;">TEN 25</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">122</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">Home</td>
<td style="text-align: right;">-25</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">outdoors</td>
<td style="text-align: left;">grass</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Mike Vrabel</td>
<td style="text-align: left;">Kliff Kingsbury</td>
<td style="text-align: left;">NAS00</td>
<td style="text-align: left;">Nissan Stadium</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>This collection of play-by-play data from the 2021 season includes 50712 observations on 372 variables. The text guides us through a simple example of ranking quarterbacks by their level of <em>agressivity</em>, as defined by average pass depth (<code>air_yards</code>). In order to perform this analysis, we’ll filter to include only pass plays with recorded <code>air_yards</code> values. After computing the summary statistics, we filter out unknown passers and passers who attempted very few passes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pbp_21 <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((play_type <span class="sc">==</span> <span class="st">"pass"</span>) <span class="sc">&amp;</span> (<span class="sc">!</span><span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(passer_id, passer) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_passes =</span> <span class="fu">n</span>(), <span class="at">avg_depth_of_pass =</span> <span class="fu">mean</span>(air_yards),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((num_passes <span class="sc">&gt;=</span> <span class="dv">100</span>) <span class="sc">&amp;</span> (<span class="sc">!</span><span class="fu">is.na</span>(passer))) <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>avg_depth_of_pass) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">passer_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">passer</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">num_passes</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">avg_depth_of_pass</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">00-0035704</td>
<td style="text-align: left;">D.Lock</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">10.154545</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0029263</td>
<td style="text-align: left;">R.Wilson</td>
<td style="text-align: right;">400</td>
<td style="text-align: right;">9.887500</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0036945</td>
<td style="text-align: left;">J.Fields</td>
<td style="text-align: right;">268</td>
<td style="text-align: right;">9.835821</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0034796</td>
<td style="text-align: left;">L.Jackson</td>
<td style="text-align: right;">378</td>
<td style="text-align: right;">9.341270</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0036389</td>
<td style="text-align: left;">J.Hurts</td>
<td style="text-align: right;">473</td>
<td style="text-align: right;">9.190275</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0034855</td>
<td style="text-align: left;">B.Mayfield</td>
<td style="text-align: right;">416</td>
<td style="text-align: right;">8.776442</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0026498</td>
<td style="text-align: left;">M.Stafford</td>
<td style="text-align: right;">740</td>
<td style="text-align: right;">8.508108</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0031503</td>
<td style="text-align: left;">J.Winston</td>
<td style="text-align: right;">161</td>
<td style="text-align: right;">8.322981</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0029604</td>
<td style="text-align: left;">K.Cousins</td>
<td style="text-align: right;">556</td>
<td style="text-align: right;">8.228417</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0034857</td>
<td style="text-align: left;">J.Allen</td>
<td style="text-align: right;">708</td>
<td style="text-align: right;">8.224576</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0031280</td>
<td style="text-align: left;">D.Carr</td>
<td style="text-align: right;">676</td>
<td style="text-align: right;">8.128698</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0031237</td>
<td style="text-align: left;">T.Bridgewater</td>
<td style="text-align: right;">426</td>
<td style="text-align: right;">8.037559</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0019596</td>
<td style="text-align: left;">T.Brady</td>
<td style="text-align: right;">808</td>
<td style="text-align: right;">7.941832</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0035228</td>
<td style="text-align: left;">K.Murray</td>
<td style="text-align: right;">515</td>
<td style="text-align: right;">7.941748</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0036971</td>
<td style="text-align: left;">T.Lawrence</td>
<td style="text-align: right;">598</td>
<td style="text-align: right;">7.913043</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0036972</td>
<td style="text-align: left;">M.Jones</td>
<td style="text-align: right;">557</td>
<td style="text-align: right;">7.901257</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0033077</td>
<td style="text-align: left;">D.Prescott</td>
<td style="text-align: right;">638</td>
<td style="text-align: right;">7.811912</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0036442</td>
<td style="text-align: left;">J.Burrow</td>
<td style="text-align: right;">659</td>
<td style="text-align: right;">7.745068</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0023459</td>
<td style="text-align: left;">A.Rodgers</td>
<td style="text-align: right;">556</td>
<td style="text-align: right;">7.730216</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0031800</td>
<td style="text-align: left;">T.Heinicke</td>
<td style="text-align: right;">491</td>
<td style="text-align: right;">7.692464</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0035993</td>
<td style="text-align: left;">T.Huntley</td>
<td style="text-align: right;">185</td>
<td style="text-align: right;">7.675676</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0032950</td>
<td style="text-align: left;">C.Wentz</td>
<td style="text-align: right;">516</td>
<td style="text-align: right;">7.641473</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0029701</td>
<td style="text-align: left;">R.Tannehill</td>
<td style="text-align: right;">554</td>
<td style="text-align: right;">7.606498</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0037013</td>
<td style="text-align: left;">Z.Wilson</td>
<td style="text-align: right;">382</td>
<td style="text-align: right;">7.565445</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0036355</td>
<td style="text-align: left;">J.Herbert</td>
<td style="text-align: right;">671</td>
<td style="text-align: right;">7.554396</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0033119</td>
<td style="text-align: left;">J.Brissett</td>
<td style="text-align: right;">224</td>
<td style="text-align: right;">7.549107</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0033357</td>
<td style="text-align: left;">T.Hill</td>
<td style="text-align: right;">132</td>
<td style="text-align: right;">7.439394</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0028118</td>
<td style="text-align: left;">T.Taylor</td>
<td style="text-align: right;">149</td>
<td style="text-align: right;">7.429530</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0030520</td>
<td style="text-align: left;">M.Glennon</td>
<td style="text-align: right;">164</td>
<td style="text-align: right;">7.378049</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0035710</td>
<td style="text-align: left;">D.Jones</td>
<td style="text-align: right;">360</td>
<td style="text-align: right;">7.344444</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0036898</td>
<td style="text-align: left;">D.Mills</td>
<td style="text-align: right;">392</td>
<td style="text-align: right;">7.318878</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0031345</td>
<td style="text-align: left;">J.Garoppolo</td>
<td style="text-align: right;">511</td>
<td style="text-align: right;">7.305284</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0034869</td>
<td style="text-align: left;">S.Darnold</td>
<td style="text-align: right;">405</td>
<td style="text-align: right;">7.259259</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0026143</td>
<td style="text-align: left;">M.Ryan</td>
<td style="text-align: right;">559</td>
<td style="text-align: right;">7.159213</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0032156</td>
<td style="text-align: left;">T.Siemian</td>
<td style="text-align: right;">187</td>
<td style="text-align: right;">7.133690</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0036212</td>
<td style="text-align: left;">T.Tagovailoa</td>
<td style="text-align: right;">387</td>
<td style="text-align: right;">7.103359</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0033873</td>
<td style="text-align: left;">P.Mahomes</td>
<td style="text-align: right;">780</td>
<td style="text-align: right;">7.075641</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0027973</td>
<td style="text-align: left;">A.Dalton</td>
<td style="text-align: right;">235</td>
<td style="text-align: right;">6.987234</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0027939</td>
<td style="text-align: left;">C.Newton</td>
<td style="text-align: right;">126</td>
<td style="text-align: right;">6.968254</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0022924</td>
<td style="text-align: left;">B.Roethlisberger</td>
<td style="text-align: right;">647</td>
<td style="text-align: right;">6.761978</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00-0033106</td>
<td style="text-align: left;">J.Goff</td>
<td style="text-align: right;">489</td>
<td style="text-align: right;">6.441718</td>
</tr>
<tr class="even">
<td style="text-align: left;">00-0034401</td>
<td style="text-align: left;">M.White</td>
<td style="text-align: right;">132</td>
<td style="text-align: right;">5.886364</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>The below plots show pass depth distributons for each of the top fifteen quarterbacks listed above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>deepest_passers <span class="ot">&lt;-</span> pbp_21 <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((play_type <span class="sc">==</span> <span class="st">"pass"</span>) <span class="sc">&amp;</span> (<span class="sc">!</span><span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(passer_id, passer) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_passes =</span> <span class="fu">n</span>(), <span class="at">avg_depth_of_pass =</span> <span class="fu">mean</span>(air_yards),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((num_passes <span class="sc">&gt;=</span> <span class="dv">100</span>) <span class="sc">&amp;</span> (<span class="sc">!</span><span class="fu">is.na</span>(passer))) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>avg_depth_of_pass) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(avg_depth_of_pass, <span class="at">n =</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(passer)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>pbp_21 <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((play_type <span class="sc">==</span> <span class="st">"pass"</span>) <span class="sc">&amp;</span> (<span class="sc">!</span><span class="fu">is.na</span>(air_yards)) <span class="sc">&amp;</span> (passer <span class="sc">%in%</span> deepest_passers)) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">passer =</span> <span class="fu">factor</span>(passer, <span class="at">levels =</span> deepest_passers)) <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> air_yards, <span class="at">fill =</span> passer), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> air_yards, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.02</span>, <span class="at">fill =</span> passer), <span class="at">width =</span> <span class="fl">0.01</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>passer, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Pass Depth Distributions for 2021's Deepest Average Passers"</span>,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Air Yards"</span>,</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="FootballAnalytics_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It is interesting how similar these distributions look. Drew Lock had the highest average <code>air_depth</code> but he also had the fewest total passes among this group. This means that those very few deep-ball outliers had greater influence on his average pass depth than the other quarterbacks who played more snaps.</p>
</section>
<section id="chapter-2-eda-through-stable-versus-unstable-qb-stats" class="level2">
<h2 class="anchored" data-anchor-id="chapter-2-eda-through-stable-versus-unstable-qb-stats">Chapter 2: EDA through Stable Versus Unstable QB Stats</h2>
<p>The authors include an interesting discussion on how players should be evaluated. Some statistical measures are relatively stable for players year-over-year, while others include more variability. This introduces the possibility for strategic trading on high-variability measures – we can <em>sell-high</em> and <em>buy-low</em> on players based on such performance measures if other teams are placing undue weight on these high-variance and unstable stats. For example, yards gained by a running back are not generally stable and neither are yards gained as a result of deep throws from a quarterback. Yards gained by short passes, however, are generally stable year-over-year. Let’s analyse some of these ideas.</p>
<p>In the text, the authors use EDA to explore the hypothesis: <em>Throwing deep passes is more valuable than short passes, but it is difficult to say whether a quarterback is “good” at deep passes</em>. Here, the variability comes in with the latter half of the hypothesis – determining whether a quarterback excels in deep passing is difficult because of the high variability in deep passing statistics year-over-year.</p>
<p>Since we are discussing year-over-year comparisons, we’ll need to load several seasons-worth of data. We’ll do that now.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="ot">&lt;-</span> <span class="fu">load_pbp</span>(<span class="dv">2016</span><span class="sc">:</span><span class="dv">2021</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’ve got a lot more data to deal with now. Certainly, the number of features (variables) has stayed the same, but now we have 291550 observations across the six seasons. The authors justify looking at 2016 to 2021 because the beginning of the 2016 season was the last time a major rule change was implemented. A touchback on a kickoff resulted in starting from the 25 yard line rather than the 20 yard line. This rule change resulted in a change in kickoff strategy across the league, so analysing pre- and post-2016 data separately is justifiable.</p>
<p>Let’s take a look at year-over-year short and long pass results. We’ll use the <code>air_yards</code> variable to separate pass attempts into <em>long</em> (at least 20 yards) and <em>short</em> (less than 20 yards), and start with some simple numeric summaries, looking at *expected points added<code>(</code>epa`) by long/short pass plays.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">passing_yards =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(passing_yards), <span class="dv">0</span>, passing_yards),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;=</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">factor</span>(pass_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"short"</span>, <span class="st">"long"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_epa =</span> <span class="fu">min</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">q1_epa =</span> <span class="fu">quantile</span>(epa, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_epa =</span> <span class="fu">median</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3_epa =</span> <span class="fu">quantile</span>(epa, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_epa =</span> <span class="fu">max</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_epa =</span> <span class="fu">IQR</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_epa =</span> <span class="fu">sd</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_count =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(epa)),</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">min_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">q1_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">med_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">q3_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">max_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">iqr_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd_epa</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">missing_count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">short</td>
<td style="text-align: right;">-12.21946</td>
<td style="text-align: right;">-0.6050679</td>
<td style="text-align: right;">0.0030594</td>
<td style="text-align: right;">0.1229025</td>
<td style="text-align: right;">0.9638509</td>
<td style="text-align: right;">8.241420</td>
<td style="text-align: right;">1.568919</td>
<td style="text-align: right;">1.427852</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">long</td>
<td style="text-align: right;">-10.47792</td>
<td style="text-align: right;">-0.8196680</td>
<td style="text-align: right;">-0.4601983</td>
<td style="text-align: right;">0.3960433</td>
<td style="text-align: right;">2.1613453</td>
<td style="text-align: right;">8.789744</td>
<td style="text-align: right;">2.981013</td>
<td style="text-align: right;">2.185827</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>We can see that expected points added has greater variation on long pass plays than it does on short pass plays.</p>
<p>We’ll build a plot to compare passing stats between pairs of consecutive years, investigating stability of <code>passing_yards</code>. Let’s start by simply drawing the distributions of passing yards resulting from long and short pass plays.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">passing_yards =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(passing_yards), <span class="dv">0</span>, passing_yards)) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">factor</span>(pass_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"short"</span>, <span class="st">"long"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> passing_yards, <span class="at">y =</span> ..density.., <span class="at">fill =</span> pass_type), </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_density(aes(x = passing_yards, fill = pass_type),</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#             alpha = 0.4, show.legend = FALSE) + </span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> passing_yards, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.02</span>, <span class="at">fill =</span> pass_type), </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.01</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Passing Yards by Pass Type"</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Passing Yards"</span>,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>pass_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.
ℹ Please use `after_stat(density)` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="FootballAnalytics_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that lots of pass plays in general do not result in catches. Long passes, however, are much less likely to result in a completion. Interestingly, the distribution of passing yards on short passes, looks to be normally distributed when dropped balls are omitted.</p>
<p>Now that we have these insights, let’s take a look at the distributions of expected points added on these plays as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">passing_yards =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(passing_yards), <span class="dv">0</span>, passing_yards)) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">factor</span>(pass_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"short"</span>, <span class="st">"long"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> epa, <span class="at">y =</span> ..density.., <span class="at">fill =</span> pass_type), </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">50</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> epa, <span class="at">fill =</span> pass_type),</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> epa, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.02</span>, <span class="at">fill =</span> pass_type), </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.01</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Expected Points Added by Pass Type"</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Passing Yards"</span>,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>pass_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing non-finite values (`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing non-finite values (`stat_density()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="FootballAnalytics_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>From the plots above, we again see that the long passes show greater variability in terms of expected points added. On average, the <code>epa</code> values here are lower than for short passes, however we do see that when long passes result in receptions [assumedly], the <code>epa</code> values are much greater.</p>
<p>Now let’s see whether average passing yards on short- and long- passing attemps are stable metrics year over year. We’ll remove passers that threw very few attempts in a season, since these often include non-QB players throwing passes on trick plays that may end up in very large gains.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>),</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">passing_yards =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(passing_yards), <span class="dv">0</span>, passing_yards)) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg_pass_yards =</span> <span class="fu">mean</span>(passing_yards),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">next_season =</span> season <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">passing_yards =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(passing_yards), <span class="dv">0</span>, passing_yards)) <span class="sc">%&gt;%</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">avg_pass_yards =</span> <span class="fu">mean</span>(passing_yards),</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>),</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"passer_id"</span> <span class="ot">=</span> <span class="st">"passer_id"</span>, </span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>           <span class="st">"passer"</span> <span class="ot">=</span> <span class="st">"passer"</span>,</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>           <span class="st">"next_season"</span> <span class="ot">=</span> <span class="st">"season"</span>,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>           <span class="st">"pass_type"</span> <span class="ot">=</span> <span class="st">"pass_type"</span>)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">avg_pass_yards_curr =</span> avg_pass_yards.x,</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">avg_pass_yards_next =</span> avg_pass_yards.y) <span class="sc">%&gt;%</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">factor</span>(pass_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"short"</span>, <span class="st">"long"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_pass_yards_curr, <span class="at">y =</span> avg_pass_yards_next)) <span class="sc">+</span> </span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_pass_yards_curr, <span class="at">y =</span> avg_pass_yards_next),</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> </span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span> </span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>pass_type) <span class="sc">+</span> </span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Year-to-Year Stability of Passing Yards"</span>,</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Current Year Passing Yards"</span>,</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Next Year Passing Yards"</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="FootballAnalytics_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that there is a positive correlation between year over year passing yards. That correlation looks to be stronger on short passes. Let’s see this numerically below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">passing_yards =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(passing_yards), <span class="dv">0</span>, passing_yards)) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg_pass_yards =</span> <span class="fu">mean</span>(passing_yards),</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">next_season =</span> season <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>),</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">passing_yards =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(passing_yards), <span class="dv">0</span>, passing_yards)) <span class="sc">%&gt;%</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">avg_pass_yards =</span> <span class="fu">mean</span>(passing_yards),</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>),</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"passer_id"</span> <span class="ot">=</span> <span class="st">"passer_id"</span>, </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>           <span class="st">"passer"</span> <span class="ot">=</span> <span class="st">"passer"</span>,</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>           <span class="st">"next_season"</span> <span class="ot">=</span> <span class="st">"season"</span>,</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>           <span class="st">"pass_type"</span> <span class="ot">=</span> <span class="st">"pass_type"</span>)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">avg_pass_yards_curr =</span> avg_pass_yards.x,</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">avg_pass_yards_next =</span> avg_pass_yards.y) <span class="sc">%&gt;%</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">factor</span>(pass_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"short"</span>, <span class="st">"long"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">y2y_avg_pass_yards_correlation =</span> <span class="fu">cor</span>(avg_pass_yards_curr, avg_pass_yards_next)) <span class="sc">%&gt;%</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">y2y_avg_pass_yards_correlation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">short</td>
<td style="text-align: right;">0.4127077</td>
</tr>
<tr class="even">
<td style="text-align: left;">long</td>
<td style="text-align: right;">0.1138190</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="homework-exercises" class="level3">
<h3 class="anchored" data-anchor-id="homework-exercises">Homework Exercises</h3>
<p>The following are the exercises at the end of this chapter.</p>
<ol type="1">
<li>Create histograms using <code>epa</code> (Expected Points Added) per pass attempt.</li>
</ol>
<blockquote class="blockquote">
<p>I ended up doing this earlier in the <em>notes</em> section.</p>
</blockquote>
<ol start="2" type="1">
<li>Create boxplots using <code>epa</code> per pass attempt.</li>
</ol>
<blockquote class="blockquote">
<p>I also ended up doing this earlier in the <em>notes</em> section.</p>
</blockquote>
<ol start="3" type="1">
<li>Perform the stability analysis for average <code>epa</code> per pass attempt. Interpret the results. Do any players have similar yards per attempt year over year, but quite different EPA values? Where could this come from?</li>
</ol>
<blockquote class="blockquote">
<p>In the plot below, I’ll compare average EPA values for consecutive years. I’ll add player names to the plot in any cases where the average EPA for consecutive years differed by a full point or more.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">next_season =</span> season <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">avg_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>),</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"passer_id"</span> <span class="ot">=</span> <span class="st">"passer_id"</span>, </span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>           <span class="st">"passer"</span> <span class="ot">=</span> <span class="st">"passer"</span>,</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>           <span class="st">"next_season"</span> <span class="ot">=</span> <span class="st">"season"</span>,</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>           <span class="st">"pass_type"</span> <span class="ot">=</span> <span class="st">"pass_type"</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">avg_epa_curr =</span> avg_epa.x,</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">avg_epa_next =</span> avg_epa.y) <span class="sc">%&gt;%</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">factor</span>(pass_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"short"</span>, <span class="st">"long"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_epa_curr, <span class="at">y =</span> avg_epa_next)) <span class="sc">+</span> </span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_epa_curr, <span class="at">y =</span> avg_epa_next),</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> </span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_epa_curr, <span class="at">y =</span> avg_epa_next, <span class="at">label =</span> <span class="fu">ifelse</span>(<span class="fu">abs</span>(avg_epa_curr <span class="sc">-</span> avg_epa_next) <span class="sc">&gt;</span> <span class="dv">1</span>, passer, <span class="st">""</span>))) <span class="sc">+</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span> </span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>pass_type) <span class="sc">+</span> </span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Year-to-Year Stability of Expected Points Added"</span>,</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Current Year Average EPA"</span>,</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Next Year Average EPA"</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="FootballAnalytics_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<blockquote class="blockquote">
<p>Similar to what we did with the year-over-year passing yards, we’ll compute the correlation between consecutive year average EPA per pass attempt for long and short passes.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">next_season =</span> season <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">avg_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>),</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"passer_id"</span> <span class="ot">=</span> <span class="st">"passer_id"</span>, </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>           <span class="st">"passer"</span> <span class="ot">=</span> <span class="st">"passer"</span>,</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>           <span class="st">"next_season"</span> <span class="ot">=</span> <span class="st">"season"</span>,</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>           <span class="st">"pass_type"</span> <span class="ot">=</span> <span class="st">"pass_type"</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">avg_epa_curr =</span> avg_epa.x,</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">avg_epa_next =</span> avg_epa.y) <span class="sc">%&gt;%</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">factor</span>(pass_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"short"</span>, <span class="st">"long"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">y2y_avg_epa_correlation =</span> <span class="fu">cor</span>(avg_epa_curr, avg_epa_next)) <span class="sc">%&gt;%</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">pass_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">y2y_avg_epa_correlation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">short</td>
<td style="text-align: right;">0.3209213</td>
</tr>
<tr class="even">
<td style="text-align: left;">long</td>
<td style="text-align: right;">0.1147228</td>
</tr>
</tbody>
</table>


</div>
</div>
<blockquote class="blockquote">
<p>The correlation here is still stronger for <em>short</em> passes than <em>long</em> pass attempts. To answer the remaining question about players with stable YPA values, but unstable EPA values, I’ll compute the change in YPA over consecutive years and do the same with the change in EPA per attempt over consecutive years. Then I’ll plot the results and identify players far from the 45-degree diagonal.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">ypa =</span> <span class="fu">mean</span>(passing_yards, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">next_season =</span> season <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    pbp_16_21 <span class="sc">%&gt;%</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(play_type <span class="sc">==</span> <span class="st">"pass"</span>, <span class="sc">!</span>(<span class="fu">is.na</span>(air_yards))) <span class="sc">%&gt;%</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">ifelse</span>(air_yards <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"long"</span>, <span class="st">"short"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(passer_id, passer, season, pass_type) <span class="sc">%&gt;%</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">passing_attempts =</span> <span class="fu">n</span>(),</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>                <span class="at">ypa =</span> <span class="fu">mean</span>(passing_yards, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">avg_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(passing_attempts <span class="sc">&gt;=</span> <span class="dv">10</span>),</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"passer_id"</span> <span class="ot">=</span> <span class="st">"passer_id"</span>, </span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>           <span class="st">"passer"</span> <span class="ot">=</span> <span class="st">"passer"</span>,</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>           <span class="st">"next_season"</span> <span class="ot">=</span> <span class="st">"season"</span>,</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>           <span class="st">"pass_type"</span> <span class="ot">=</span> <span class="st">"pass_type"</span>)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ypa_curr =</span> ypa.x,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">ypa_next =</span> ypa.y,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">avg_epa_curr =</span> avg_epa.x,</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">avg_epa_next =</span> avg_epa.y) <span class="sc">%&gt;%</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ypa_delta =</span> ypa_next <span class="sc">-</span> ypa_curr,</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">avg_epa_delta =</span> avg_epa_next <span class="sc">-</span> avg_epa_curr) <span class="sc">%&gt;%</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pass_type =</span> <span class="fu">factor</span>(pass_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"short"</span>, <span class="st">"long"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> ypa_delta, <span class="at">y =</span> avg_epa_delta)) <span class="sc">+</span> </span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> ypa_delta, <span class="at">y =</span> avg_epa_delta, <span class="at">label =</span> <span class="fu">ifelse</span>(<span class="fu">abs</span>(avg_epa_delta) <span class="sc">&gt;</span> <span class="dv">1</span>, passer, <span class="st">""</span>))) <span class="sc">+</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span> </span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>pass_type) <span class="sc">+</span> </span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Change in YPA with Change in Average EPA"</span>,</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Change in YPA"</span>,</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Change in Average EPA"</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="FootballAnalytics_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<blockquote class="blockquote">
<p>WIth the exception of Tua, these look like players who have switched teams fairly often throughout their careers. A switch in team means a switch in coaching staff and strategy. We could plot the year in addition to the player name and then check on this hypothesis if we wanted.</p>
</blockquote>
<ol start="4" type="1">
<li>Find a cutoff that equally splits the data between <em>long</em> and <em>short</em> pass attempts and then re-run the analysis.</li>
</ol>
<blockquote class="blockquote">
<p>I’m not going to repeat the analysis right now, but we can find the median pass attempt length to determine a more equitable cutoff than 20 yards for <code>air_yards</code>. That cutoff would be about 5.</p>
</blockquote>
</section>
</section>
<section id="chapter-3-linear-regression-and-rushing-yards-over-expected" class="level2">
<h2 class="anchored" data-anchor-id="chapter-3-linear-regression-and-rushing-yards-over-expected">Chapter 3: Linear Regression and Rushing Yards Over Expected</h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>